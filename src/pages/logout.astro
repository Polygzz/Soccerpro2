---
import { supabaseClient } from '../utils/supabaseClient';
import Layout from '../layouts/Layout.astro';
---

<Layout>
  <main class="container mx-auto px-4 py-8 text-center">
    <h1 class="text-2xl font-semibold mb-4">Logging out...</h1>
    <p class="text-textSecondary">Please wait while we log you out.</p>
  </main>

  <script type="module">
    import { supabaseClient } from '../utils/supabaseClient';

    // Call logout on Supabase
    supabaseClient.auth.signOut().then(() => {
      // Clear the cookies
      document.cookie = "sb-access-token=; path=/; max-age=0";
      document.cookie = "sb-refresh-token=; path=/; max-age=0";

      // Redirect to login
      window.location.href = '/login';
    });
  </script>
</Layout>
